<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ‚ æœˆæœˆå…¬ä¸»ç”Ÿæ—¥å¿«ä¹ ğŸ’–</title>
<link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#ffe6f3;
    --bg2:#fff4f8;
    --accent:#ff8ac3;
    --shadow:0 12px 24px rgba(255,120,160,0.25);
    --radius:16px;
    --font:'ZCOOL KuaiLe','PingFang SC',sans-serif;
  }
  html,body{
    margin:0;
    height:100%;
    overflow:hidden;
    background:radial-gradient(circle at top left,var(--bg1),var(--bg2));
    font-family:var(--font);
    color:#b02b58;
  }

  /* ======== è¿›å…¥é¡µ ======== */
  #intro {
    position:fixed;inset:0;
    background:linear-gradient(180deg,#fff0fa,#ffd6eb,#ffe6f2);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:99999;
    transition:opacity 1.5s ease-in-out;
  }
  #intro h1 {
    font-size:2.6em;
    color:#ff69b4;
    text-shadow:0 0 15px #ffcbe1;
    animation:float 3s ease-in-out infinite;
    margin-bottom:28px;
    text-align:center;
  }
  #enterBtn {
    background:linear-gradient(90deg,#ffaad4,#ff8ac3);
    border:none;color:white;font-weight:600;
    border-radius:999px;padding:12px 26px;
    font-size:1.2em;
    cursor:pointer;box-shadow:var(--shadow);
    transition:transform .3s, box-shadow .3s;
  }
  #enterBtn:hover {
    transform:scale(1.08);
    box-shadow:0 0 30px rgba(255,150,180,0.8);
  }
  @keyframes float {
    0%,100%{transform:translateY(0);}
    50%{transform:translateY(-10px);}
  }

  /* èƒŒæ™¯æ˜Ÿå…‰ */
  .bg-stars{
    position:fixed;inset:0;
    z-index:-2;
    overflow:hidden;
  }
  .star{
    position:absolute;
    width:4px;height:4px;
    background:white;border-radius:50%;
    opacity:0.8;
    animation:twinkle 3s infinite ease-in-out;
  }
  @keyframes twinkle{
    0%,100%{opacity:.3;}
    50%{opacity:1;}
  }

  /* æ°”çƒ */
  .balloon{
    position:absolute;
    bottom:-150px;
    width:50px;height:70px;
    border-radius:50% 50% 45% 45%;
    background:var(--accent);
    animation:floatUp 15s linear infinite;
    opacity:.9;
  }
  @keyframes floatUp{
    0%{transform:translateY(0) rotate(0deg);}
    100%{transform:translateY(-110vh) rotate(10deg);}
  }

  /* æ§åˆ¶åŒº */
  .controls{
    position:fixed;top:12px;left:12px;
    display:flex;align-items:center;gap:10px;
    z-index:9999;
  }
  .btn{
    background:linear-gradient(90deg,#ffaad4,#ff8ac3);
    border:none;color:white;font-weight:600;
    border-radius:999px;padding:8px 14px;
    cursor:pointer;box-shadow:var(--shadow);
    transition:transform .2s;
  }
  .btn:hover{transform:scale(1.07);}
  input[type=range]{accent-color:#ff8ac3;width:140px;}

  /* å¼¹çª— */
  .window{
    position:fixed;border-radius:var(--radius);
    background:rgba(255,255,255,0.85);
    box-shadow:var(--shadow);backdrop-filter:blur(6px);
    overflow:hidden;animation:popIn .4s cubic-bezier(.2,.9,.3,1);
    cursor:grab;user-select:none;
  }
  @keyframes popIn{
    0%{transform:scale(.7) translateY(20px);opacity:0;}
    100%{transform:scale(1) translateY(0);opacity:1;}
  }
  .win-head{
    height:28px;display:flex;align-items:center;
    gap:8px;padding:6px 10px;
    background:linear-gradient(90deg,#ffafd3,#ff8ac3);
    color:#fff;
  }
  .dots{display:flex;gap:6px;}
  .dot{width:12px;height:12px;border-radius:50%;}
  .dot.red{background:#ff7b9a;}
  .dot.yellow{background:#ffd36f;}
  .dot.green{background:#8ee2a0;}
  .win-body{
    padding:14px 16px;
    font-size:18px;text-align:center;line-height:1.3;
  }

  .hint{
    position:fixed;right:12px;bottom:12px;
    background:rgba(255,255,255,0.85);
    padding:8px 12px;border-radius:999px;
    box-shadow:var(--shadow);
    color:#c84a7a;font-weight:600;z-index:99999;
  }

  @media(max-width:520px){
    .win-body{font-size:14px;padding:10px 12px;}
  }
</style>
</head>
<body>
  <!-- ====== è¿›å…¥é¡µ ====== -->
  <div id="intro">
    <h1>ğŸ‰ æœˆæœˆå…¬ä¸»ç”Ÿæ—¥å¿«ä¹ï¼<br>ä»Šå¤©çš„ä¸–ç•Œåªä¸ºä½ é—ªå…‰ âœ¨</h1>
    <button id="enterBtn">ğŸ’– ç‚¹æˆ‘å¼€å¯æƒŠå–œ ğŸ’–</button>
  </div>

  <!-- ====== ä¸»é¡µé¢å†…å®¹ ====== -->
  <div class="bg-stars" id="stars"></div>
  <div class="controls">
    <button id="toggleBtn" class="btn">åœæ­¢</button>
    <button id="clearBtn" class="btn">æ¸…ç©º</button>
    <label style="font-weight:600;color:#b02b58;">é€Ÿç‡:</label>
    <input id="rate" type="range" min="50" max="2000" step="10" value="300">
  </div>
  <div class="hint">ğŸˆç‚¹å‡»ä»»æ„å¼¹çª—å¯ç§»é™¤å®ƒï½</div>

  <!-- ğŸµ èƒŒæ™¯éŸ³ä¹ -->
  <audio id="bgm" loop preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d4b962aa1d.mp3?filename=birthday-109763.mp3" type="audio/mpeg">
  </audio>

<script>
/* ========== è½¬åœºæ§åˆ¶ ========== */
const intro=document.getElementById('intro');
const enterBtn=document.getElementById('enterBtn');
const music=document.getElementById('bgm');

enterBtn.addEventListener('click',()=>{
  intro.style.opacity=0;
  setTimeout(()=>{
    intro.style.display='none';
    startMain();
    tryPlay();
  },1500);
});

/* è‡ªåŠ¨æ’­æ”¾éŸ³ä¹ */
function tryPlay(){
  music.volume=0.4;
  const playPromise=music.play();
  if(playPromise){ playPromise.catch(()=>{}); }
}
window.addEventListener('load',()=>setTimeout(tryPlay,1000));
document.addEventListener('click',()=>{tryPlay();},{once:true});

/* ========== ä¸»å†…å®¹é€»è¾‘ ========== */

/* æ˜Ÿæ˜Ÿ */
for(let i=0;i<40;i++){
  const s=document.createElement('div');
  s.className='star';
  s.style.left=Math.random()*100+'%';
  s.style.top=Math.random()*100+'%';
  s.style.animationDelay=(Math.random()*3)+'s';
  s.style.width=s.style.height=(Math.random()*3+2)+'px';
  document.getElementById('stars').appendChild(s);
}

/* æ°”çƒ */
const colors=['#ff9ecd','#ffd6eb','#ffb7d9','#ffcfe5','#ff8ac3'];
for(let i=0;i<6;i++){
  const b=document.createElement('div');
  b.className='balloon';
  b.style.left=Math.random()*90+'%';
  b.style.background=colors[i%colors.length];
  b.style.animationDelay=(Math.random()*6)+'s';
  document.body.appendChild(b);
}

/* å¼¹çª— */
const messages=[
  "ğŸ‚ æœˆæœˆå…¬ä¸»ç”Ÿæ—¥å¿«ä¹ï½ä»Šå¤©å…¨ä¸–ç•Œéƒ½ä¸ºä½ é—ªå…‰ âœ¨",
  "æ„¿ä½ æ°¸è¿œåƒç°åœ¨è¿™æ ·ç”œç”œçš„ã€è½¯è½¯çš„ã€è¢«çˆ±ç€ ğŸ’–",
  "æœˆæœˆå…¬ä¸»ï½ç¬‘ä¸€ä¸ªï¼Œå¥½æƒ³ä¸€ç›´çœ‹ä½ ç¬‘ (â„â„â€¢â„Ï‰â„â€¢â„â„)",
  "è›‹ç³•æ˜¯ç”œçš„ï¼Œä½ æ¯”è›‹ç³•æ›´ç”œ ğŸ°",
  "ä»Šå¤©çš„ä½ ï¼Œæ˜¯å®‡å®™æœ€äº®çš„å°æ˜Ÿæ˜Ÿ â­",
  "æ„¿ä½ å¿ƒä¸­æœ‰å…‰ï¼Œçœ¼é‡Œæœ‰ç¬‘ï¼Œå²å²å¹³å®‰å–œä¹ ğŸ€",
  "å˜¿å°å…¬ä¸»ï½è®¸æ„¿çš„æ—¶å€™åˆ«å¿˜äº†å·å·æƒ³æˆ‘å™¢ğŸ˜š",
  "æœˆæœˆå…¬ä¸»æœ€å¯çˆ±ï¼Œä»Šå¤©ä¸“å±çš„å¹¸ç¦éƒ½ç»™ä½ ï½ğŸ",
  "å¸Œæœ›ä½ çš„æ¯ä¸€å¹´éƒ½æ¯”å»å¹´æ›´å¹¸ç¦ï½ğŸ’«",
  "ç”Ÿæ—¥å¿«ä¹å‘€æœˆæœˆå…¬ä¸»ï½æ°¸è¿œæ˜¯è¢«çˆ±çš„å°å­©ğŸ’"
];
let running=true;
let spawnRate=300;
const popups=[];
function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a;}
function pick(a){return a[Math.floor(Math.random()*a.length)];}

function createPopup(){
  const win=document.createElement('div');
  win.className='window';
  const w=rand(220,420);
  const h=rand(64,140);
  win.style.width=w+'px';
  win.style.left=rand(8,window.innerWidth-w-8)+'px';
  win.style.top=rand(8,window.innerHeight-h-8)+'px';
  win.innerHTML=`
    <div class="win-head">
      <div class="dots">
        <div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div>
      </div>
    </div>
    <div class="win-body">${pick(messages)}</div>`;
  win.addEventListener('click',()=>removePopup(win));
  document.body.appendChild(win);
  popups.push(win);
  if(popups.length>200) removePopup(popups.shift());
}
function removePopup(el){
  if(!el||el._rem) return;
  el._rem=true;
  el.style.transition='transform .4s, opacity .4s';
  el.style.transform='translateY(30px) scale(.6)';
  el.style.opacity='0';
  setTimeout(()=>el.remove(),400);
}

let timer;
function startMain(){
  timer=setInterval(()=>{if(running)createPopup();},spawnRate);
  for(let i=0;i<8;i++)setTimeout(createPopup,i*80);
}
function restartTimer(){
  clearInterval(timer);
  timer=setInterval(()=>{if(running)createPopup();},spawnRate);
}

/* æ§åˆ¶æŒ‰é’® */
const toggleBtn=document.getElementById('toggleBtn');
const clearBtn=document.getElementById('clearBtn');
const rate=document.getElementById('rate');
toggleBtn.onclick=()=>{running=!running;toggleBtn.textContent=running?'åœæ­¢':'ç»§ç»­';};
clearBtn.onclick=()=>{popups.forEach(removePopup);};
rate.oninput=e=>{spawnRate=+e.target.value;restartTimer();};
</script>
</body>
</html>
